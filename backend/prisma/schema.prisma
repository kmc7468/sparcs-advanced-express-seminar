generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model User {
  id           String   @id @default(cuid())
  username     String   @unique(map: "users_username_key")
  passwordHash String
  createdAt    DateTime @default(now())
  photos       Photo[]
}

model Photo {
  id          String   @id @default(cuid())
  title       String
  description String
  imageKey    String
  isPublic    Boolean  @default(true)
  createdAt   DateTime @default(now())
  userId      String
  user        User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@index([userId, createdAt], map: "photos_user_order_idx")
  @@index([isPublic, createdAt], map: "photos_public_order_idx")
}
